<!DOCTYPE html>
<html lang="en">

<head>
            <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>:wq</title>

        <!-- jQuery -->
        <!-- <script src="https://aga3.xyz/./theme/static/js/jquery.js"></script> -->
        <script src="https://code.jquery.com/jquery-2.2.3.min.js"></script>

        <!-- Bootstrap Core JavaScript -->
        <script src="https://aga3.xyz/./theme/static/js/bootstrap.min.js"></script>
        <!-- Bootstrap Core CSS -->
        <link href="https://aga3.xyz/./theme/static/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom Theme JavaScript -->
        <script src="https://aga3.xyz/./theme/static/js/clean-blog.min.js"></script>

        <!-- Custom CSS -->
        <link href="https://aga3.xyz/./theme/static/css/clean-blog.css" rel="stylesheet">

        <!-- Code highlight color scheme -->
            <link href="https://aga3.xyz/./theme/static/css/code_blocks/tomorrow_night.css" rel="stylesheet">

        <!-- FontAwesome JavaScript -->
        <script src="https://kit.fontawesome.com/3abd13917d.js"></script>

            <link href="https://aga3.xyz/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title=":wq Full Atom Feed" />

        <!-- Custom Fonts
        <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'> -->

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->





     <link rel="canonical" href="https://aga3.xyz/2022/07/should-you-pad-your-fft-for-performance" />


			<meta property="og:locale" content="en">
		<meta property="og:site_name" content=":wq">

	<meta property="og:type" content="article">
	<meta property="article:author" content="">
	<meta property="og:url" content="https://aga3.xyz/2022/07/should-you-pad-your-fft-for-performance">
	<meta property="og:title" content="Should you pad your FFT for performance?">
	<meta property="og:description" content="">
	<meta property="og:image" content="https://aga3.xyz//images/piestewa_1024.jpg">
	<meta property="article:published_time" content="2022-07-27 15:18:00-04:00">
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://aga3.xyz/">:wq</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">

						<li><a href="https://aga3.xyz/about-me/">About Me</a></li>
						<li><a href="https://aga3.xyz/projects/">Projects</a></li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Header -->
    <header class="intro-header" style="background-image: url('/images/piestewa_1024.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2">
                    <div class="post-heading">
                        <h1>Should you pad your FFT for performance?</h1>
                        <span class="meta">
                             Wednesday July 27, 2022
                        </span>
                        
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2">
    <!-- Post Content -->
    <article>
        <p>Fast Fourier Transform (FFT) algorithms <a href="https://en.wikipedia.org/wiki/Cooleyâ€“Tukey_FFT_algorithm">typically
operate</a> by
recursively (though perhaps not literally using recursion in the code) breaking
down the input into prime-factor-length sub-problems. Thus, the overall speed of
the funciton depends on the largest prime factor, and prime inputs may be slow
because they can't be broken down at all.</p>
<p>But how much slower are these prime inputs? If they're much slower, we may want
to pad the input with zeros. This is generally okay, but depending on your
input may cause window-related artifacts in your output.</p>
<p>Here's a quick benchmark of a 1D complex FFT using <code>scipy.fft</code> (which I believe
uses <a href="https://gitlab.mpcdf.mpg.de/mtr/pocketfft"><code>pocketFFT</code></a>). This shows the
minimum execution time of 10 runs for random (uniform) complex data up to input
length 2**16. Prime inputs are highlighted by the red dots.</p>
<p><img src="https://aga3.xyz/images/fft_bench.png", width="100%"></p>
<p>My takeaways here are:</p>
<ul>
<li>FFT of primes is definitely slower, up to ~5x (eyeballing it from the graph)</li>
<li>Still, FFT is generally very fast even for large inputs</li>
<li>Remember padding the input to avoid primes will also take some time (and
  memory) and may introduce window artifacts (though not padding doesn't
  guarantee absence of artifacts)</li>
<li>As always, benchmark your specific application to see if this is meaningful
  (e.g. if you're doing an N-D FFT or calling it in a tight loop)</li>
</ul>
    </article>

    <hr>

            </div>
        </div>
    </div>

    <hr>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2">
                    <ul class="list-inline text-center">
                        <li>
                            <a href="https://twitter.com/aganders3">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/aganders3">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    </ul>
                    <p class="copyright text-muted">Blog powered by <a href="http://getpelican.com">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.</p>
                </div>
            </div>
        </div>
    </footer>


</body>

</html>